<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>简繁家</title>

    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/img/favicon-96x96.png">

    <!-- build:css css/login-vender.css -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css"/>
    <!-- endbuild -->

    <!-- build:css css/login.css -->
    <link rel="stylesheet" href="css/auth.css">
    <!-- endbuild -->
  </head>
  <body>
    <main class="auth-main">
      <div class="auth-block">
        <h1>简繁家</h1>
        <a href="/" class="auth-link">让装修变简单</a>

        <form id="login-form" class="form-horizontal">
          <div class="form-group">
            <label for="inputEmail3" class="col-sm-2 control-label">用户名</label>

            <div class="col-sm-10">
              <input id="username" type="text" class="form-control" id="inputEmail3" placeholder="用户名">
            </div>
          </div>
          <div class="form-group">
            <label for="inputPassword3" class="col-sm-2 control-label">密码</label>

            <div class="col-sm-10">
              <input id="password" type="password" class="form-control" id="inputPassword3" placeholder="密码">
            </div>
          </div>
          <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
              <button id="login-btn" type="button" class="btn btn-default btn-auth">登录</button>
            </div>
          </div>
        </form>
      </div>
    </main>
    <!-- build:js js/login-vender.js -->
    <script src="bower_components/jquery/dist/jquery.js"></script>
    <!-- endbuild -->
  </body>
</html>
<script type="text/javascript">
  //获取对象
  var username = $("#username");
  var password = $("#password");

  $('#login-btn').on('click', function() {
    $.ajax({
      url: 'api/v2/web/admin/login',
      type: 'POST',
      contentType: 'application/json; charset=utf-8',
      data: JSON.stringify({"username": username.val(), "pass": password.val()}),
      dataType: 'json',
      success: function(res) {
        if (res["msg"] === "success") {
          window.location.href = "/";
        } else {
          $('#login-form').addClass('has-error');
        }
      }
    });
  })
</script>
